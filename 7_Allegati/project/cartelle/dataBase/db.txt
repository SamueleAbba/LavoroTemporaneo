CREATE DATABASE lavoro_temporaneo;
USE DATABASE lavoro_temporaneo;

tabella 1
CREATE TABLE utente(
	email VARCHAR(25) PRIMARY KEY,
	passwordHash VARCHAR(25) NOT NULL,
	nomeRuolo ENUM('amministratore', 'datore', 'lavoratore') NOT NULL
);

tabella 2
CREATE TABLE fattura(
	data DATE NOT NULL,
	datore_email VARCHAR(25) NOT NULL,
	lavoratore_email VARCHAR(25) NOT NULL,
	FOREIGN KEY (datore_email)
	REFERENCES utente(email)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	FOREIGN KEY (lavoratore_email)
	REFERENCES utente(email)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);

tabella3
CREATE TABLE lavoro(
	id INT PRIMARY KEY,
	datore_email VARCHAR(25) NOT NULL,
	lavoratore_email VARCHAR(25) NOT NULL,
	titolo VARCHAR(25) NOT NULL,
	descrizione VARCHAR(100) NOT NULL,
	tariffaOraria INT NOT NULL,
	occupato TINYINT,
	scaduto TINYINT,
	oreDiLavoro INT,
	FOREIGN KEY (datore_email)
	REFERENCES utente(email)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	FOREIGN KEY (lavoratore_email)
	REFERENCES utente(email)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);

tabella 4
CREATE TABLE lavoro_proposta(
	data DATE PRIMARY KEY,
	lavoro_id INT NOT NULL,
	lavoratore_email VARCHAR(25) NOT NULL,
	titolo VARCHAR(25) NOT NULL,
	descrizione VARCHAR(100) NOT NULL,
	allegati BLOB NOT NULL,
	FOREIGN KEY (lavoro_id)
	REFERENCES lavoro(id)
	ON DELETE CASCADE
	ON UPDATE CASCADE,
	FOREIGN KEY (lavoratore_email)
	REFERENCES utente(email)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);